(function(){function t(t,e){t.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/about",{templateUrl:"/common/views/about.view.html",controller:"aboutCtrl",controllerAs:"vm"}).when("/dishes/:dishid",{templateUrl:"/dishDetail/dishDetail.view.html",controller:"dishDetailCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"}),e.html5Mode(!0)}angular.module("wictApp",["ngRoute","ngSanitize","ngResource","ui.bootstrap"]),angular.module("wictApp").config(["$routeProvider","$locationProvider",t])})(),function(){function t(t,e,o){var n=this;n.pageHeader={title:"Dishes Near You",strapline:"See what home cooks around you are making!"},n.sidebar={content:"WICT lets you share images of what you cooked with those around you, as well as see what others are cooking."},n.message="Checking your location",n.getData=function(t){var o=t.coords.latitude,i=t.coords.longitude;n.message="The buns are still in the oven!",e.dishByCoords(o,i).then(function(t){n.message=t.length>0?"":"No dishes found near you. Be the first to add dishes in your area!",n.data={dishes:t}},function(t){console.log(t),n.message="Our stove is hooked up wrong, we're on it"})},n.showError=function(e){t.$apply(function(){n.message=e.message})},n.noGeo=function(){t.$apply(function(){n.message="Geolocation not supported by your browser."})},o.getPosition(n.getData,n.showError,n.noGeo)}angular.module("wictApp").controller("homeCtrl",t),t.$inject=["$scope","wictData","geolocation"]}(),function(){function t(){var t=this;t.pageHeader={title:"About WICT"},t.main={content:"WICT lets you share pictures and recipes of the things you cook at home with others around the world. It also lets you see what other people in other places (or around you) are cooking.\n\nTEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT TEEEEXT"}}angular.module("wictApp").controller("aboutCtrl",t)}(),function(){function t(t,e,o){var n=this;n.dishid=t.dishid,o.dishById(n.dishid).success(function(t){n.data={dish:t},n.pageHeader={title:n.data.dish.name}}).error(function(t){console.log(t)}),n.popupCommentForm=function(){var t=e.open({templateUrl:"/commentModal/commentModal.view.html",contorller:"commentModalCtrl",controllerAs:"vm",resolve:{dishData:function(){return{dishid:n.dishid,dishName:n.dish.name}}}});t.result.then(function(t){n.data.dish.comments.push(t)})}}angular.module("wictApp").controller("dishDetailCtrl",t),t.$inject=["$routeParams","$modal","wictData"]}(),function(){function t(t,e,o){var n=this;n.dishData=o,n.onSubmit=function(){return n.formError="",n.formData.name&&n.formData.commentText?(n.doAddComment(n.dishData.dishid,n.formData),void 0):(n.formError="All fields required, please try again",!1)},n.doAddComment=function(t,o){return e.addCommentById(t,{author:o.name,commentText:o.commentText}).success(function(t){n.modal.close(t)}).error(function(){n.formError="Your comment has not been saved, try again"}),!1},n.modal={close:function(e){t.close(e)},cancel:function(){t.dismiss("cancel")}}}angular.module("wictApp").controller("commentModalCtrl".commentModalCtrl),t.$inject=["$modalInstance","wictData","dishData"]}(),function(){function t(t){var e=function(e,o){return t.get("/api/dishes?lat="+e+"&lng="+o+"&maxDistance=20")},o=function(e){return t.get("/api/dishes/"+e)},n=function(t,e){return $hhtp.post("/api/dishes/"+t+"/comments",e)};return{dishByCoords:e,dishById:o,addCommentById:n}}angular.module("wictApp").service("wictData",t),t.$inject=["$http"]}(),function(){function t(){var t=function(t,e,o){navigator.geolocation?navigator.geolocation.getCurrentPosition(t,e):o()};return{getPosition:t}}angular.module("wictApp").service("geolocation",t)}(),function(){function t(){return function(t){var e=t.replace(/\n/g,"<br>");return e}}angular.module("wictApp").filter("addHtmlLineBreaks",t)}(),function(){angular.module("wictApp").filter("formatDistance",e);var t=function(t){return!isNaN(parseFloat(t)&&isFinite(t))},e=function(){return function(e){var o,n;return e&&t(e)?(e>1?(o=parseFloat(e).toFixed(1),n="km"):(o=parseInt(1e3*e,10),n="m"),o+n):"?"}}}(),function(){function t(){return{restrict:"EA",scope:{thisLikes:"=likes"},templateUrl:"/common/directives/likesCount/likesCount.template.html"}}angular.module("wictApp").directive("likesCount",t)}(),function(){function t(){return{restrict:"EA",templateUrl:"/common/directives/wictFooter/wictFooter.template.html"}}angular.module("wictApp").directive("wictFooter",t)}(),function(){function t(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html"}}angular.module("wictApp").directive("navigation",t)}(),function(){function t(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/pageHeader/pageHeader.template.html"}}angular.module("wictApp").directive("pageHeader",t)}();